# Function Definition Implementation Plan (Phase 2.5)

## Goal
Implement basic function definition parsing with parameters, starting simple and building up complexity.

## Python Function Syntax (What we need to support)

### Basic function:
```python
def func():
    pass

def func():
    return 42
```

### Function with parameters:
```python
def func(x):
    pass

def func(x, y, z):
    pass
```

### Function with default parameters:
```python
def func(x=1):
    pass

def func(x, y=2, z=3):
    pass
```

### Function with *args and **kwargs:
```python
def func(*args):
    pass

def func(**kwargs):
    pass

def func(x, *args, **kwargs):
    pass
```

## Implementation Strategy

Start with the simplest cases and build up:
1. **Basic function** - no parameters, simple body
2. **Function with simple parameters** - positional parameters only
3. **Function with default parameters** - parameters with default values
4. **Function with *args and **kwargs** - variadic parameters

We'll handle more complex features (type hints, decorators, async) later.

## Phase 1: Basic Functions

### Step 1: Check AST
- [x] FunctionDef AST node already defined in ast.rs
- [x] Has: name, parameters, body, position
- [ ] Check Parameter structure

### Step 2: Parser Implementation
- [ ] Implement `parse_function_def()` method
- [ ] Parse "def" keyword
- [ ] Parse function name
- [ ] Parse parameter list (parentheses)
- [ ] Parse colon
- [ ] Parse body block
- [ ] Handle empty parameter list

### Step 3: Testing - Basic Functions
- [ ] Test: Function with no parameters
- [ ] Test: Function with single parameter
- [ ] Test: Function with multiple parameters
- [ ] Test: Function with body containing multiple statements
- [ ] Test: Function with return statement
- [ ] Test: Nested function definitions
- [ ] Error tests: Missing colon, missing body, invalid names

## Phase 2: Default Parameters

### Step 1: Update Parameter parsing
- [ ] Parse parameter with default value (param=value)
- [ ] Validate that params with defaults come after params without

### Step 2: Testing - Default Parameters
- [ ] Test: Single parameter with default
- [ ] Test: Mix of parameters with and without defaults
- [ ] Test: All parameters with defaults
- [ ] Error tests: Required param after optional

## Phase 3: *args and **kwargs

### Step 1: Update Parameter parsing
- [ ] Parse *args (variadic positional)
- [ ] Parse **kwargs (variadic keyword)
- [ ] Validate parameter order

### Step 2: Testing - Variadic Parameters
- [ ] Test: Function with *args
- [ ] Test: Function with **kwargs
- [ ] Test: Function with both *args and **kwargs
- [ ] Test: Mix of regular, *args, **kwargs
- [ ] Error tests: Invalid parameter order

## Documentation
- [ ] Update CHANGELOG.md
- [ ] Update ROADMAP.md

## Notes
- The AST already has FunctionDef defined
- We need to check the Parameter structure
- Start simple and add complexity incrementally
- Type hints and decorators will come later
